{{ define "main" }}

<div class="td-content">
  <h1>{{ .Title }}</h1>
  {{ with .Params.description }}<div class="lead">{{ . | markdownify }}</div>{{ end }}
  <header class="article-meta">
    {{ $context := . }}
    {{ if .Site.Params.Taxonomy.taxonomyPageHeader }}
      {{ range $index, $taxo := .Site.Params.Taxonomy.taxonomyPageHeader }}
        {{ partial "taxonomy_terms_article.html" (dict "context" $context "taxo" $taxo ) }}
      {{ end }}
    {{ else }}
      {{ range $taxo, $taxo_map := .Site.Taxonomies }}
        {{ partial "taxonomy_terms_article.html" (dict "context" $context "taxo" $taxo ) }}
      {{ end }}
    {{ end }}
    {{ if (and (not .Params.hide_readingtime) (.Site.Params.ui.readingtime.enable)) }}
      {{ partial "reading-time.html" . }}
    {{ end }}
  </header>    

  {{ $GedFile := (.FirstSection.Resources.GetMatch "potter_universe.ged").Permalink }}
	{{ $id := printf "\"@%s@\"" .Params.id }}
	<div >
    <h4 class="h3">
      Biographical Information
    </h4>
    <div class="mb-0" id="bio-info" 
	  	x-data="{
				birthday: '',
				deathday: '',
			}
			"
			x-effect="
				console.log('in x-effect');
				console.log($store.HPGedCom.myHPGC.isLoaded);
				birthday = $store.HPGedCom.myHPGC.bDay({{$id}}) || birthday;
				deathday = $store.HPGedCom.myHPGC.dDay({{$id}}) || deathday;
				console.log('x-effect birthday is ' + birthday);
				console.log('type is ' + typeof(birthday));
			"
			x-modelable='birthday'
			x-init="
				console.log('GedFile is {{ $GedFile }}');
  	    $store.HPGedCom.myURL = '{{ $GedFile }}';
				await $store.HPGedCom.initGC();
			"
		>
		Birthday: <span @GedLoaded.document="console.log('birthday is ' + birthday + ` printing ${year}-${month}-${day}`);"
				x-text="birthday.toString().replace('DATE ', '');">didn't work</span><br/>
			Death: <span @GedLoaded.document="console.log('deathday is ' + deathday);" x-text="deathday.toString().replace('DATE ', '');"></span>
    </div>
  </div>

  {{ .Content }}
  {{ if (and (not .Params.hide_feedback) (.Site.Params.ui.feedback.enable) (.Site.GoogleAnalytics)) }}
    {{ partial "feedback.html" .Site.Params.ui.feedback }}
    <br />
  {{ end }}
  {{ if (.Site.Params.DisqusShortname) }}
    <br />
    {{ partial "disqus-comment.html" . }}
  {{ end }}
  {{ partial "page-meta-lastmod.html" . }}
</div>

{{ end }}
